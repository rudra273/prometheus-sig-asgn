<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Pomodoro Timer</h1>
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h2 id="timer-display" class="text-center">25:00</h2>
                        <div class="text-center mb-3">
                            <button id="start-btn" class="btn btn-primary">Start</button>
                            <button id="reset-btn" class="btn btn-secondary">Reset</button>
                        </div>
                        <div class="form-group">
                            <label for="workDuration">Work Duration (minutes)</label>
                            <input type="number" id="workDuration" class="form-control" value="25" min="1" max="60">
                        </div>
                        <div class="form-group">
                            <label for="breakDuration">Break Duration (minutes)</label>
                            <input type="number" id="breakDuration" class="form-control" value="5" min="1" max="60">
                        </div>
                        <div class="progress">
                            <div id="progress-bar" class="progress-bar" role="progressbar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        let timer;
        let workDuration = 25 * 60; // Default work duration in seconds (25 minutes)
        let breakDuration = 5 * 60; // Default break duration in seconds (5 minutes)
        let timeLeft = workDuration;
        let isRunning = false;

        function formatTime(seconds) {
            let minutes = Math.floor(seconds / 60);
            let remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function updateTimerDisplay() {
            document.getElementById('timer-display').innerText = formatTime(timeLeft);
            let progress = (timeLeft / workDuration) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timer = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        clearInterval(timer);
                        isRunning = false;
                        notify();
                        setTimeout(resetTimer, 5000); // Reset after 5 seconds
                    }
                }, 1000);
            }
        }

        function resetTimer() {
            clearInterval(timer);
            isRunning = false;
            timeLeft = workDuration;
            updateTimerDisplay();
        }

        function notify() {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Pomodoro Timer', {
                    body: 'Time is up! Take a break.',
                    icon: 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/svgs/brands/twitter.svg'
                });
            }
        }

        function updateSettings() {
            workDuration = parseInt(document.getElementById('workDuration').value) * 60;
            breakDuration = parseInt(document.getElementById('breakDuration').value) * 60;
            timeLeft = workDuration;
            updateTimerDisplay();
        }

        document.getElementById('start-btn').addEventListener('click', startTimer);
        document.getElementById('reset-btn').addEventListener('click', resetTimer);
        document.getElementById('workDuration').addEventListener('input', updateSettings);
        document.getElementById('breakDuration').addEventListener('input', updateSettings);

        updateTimerDisplay(); // Initial display
    </script>
</body>
</html>
